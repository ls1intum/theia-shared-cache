{{- if .Values.enabled }}
Gradle Build Cache has been deployed!

1. Get the cache server URL:

   export CACHE_URL=http://{{ .Release.Name }}-cache:8080

2. Port-forward to access the cache locally:

   kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ .Release.Name }}-cache 8080:8080

3. Test the cache server:

   curl http://localhost:8080/ping
   curl http://localhost:8080/health

4. Configure your Gradle build (settings.gradle.kts):

   buildCache {
       remote<HttpBuildCache> {
           url = uri("$CACHE_URL/cache/")
           {{- if .Values.auth.enabled }}
           credentials {
               username = "{{ .Values.auth.username }}"
               password = "<your-password>"
           }
           {{- end }}
           isPush = true
       }
   }

5. MinIO console (for debugging):

   kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ .Release.Name }}-minio 9001:9001

   Then open http://localhost:9001
   Username: minioadmin
   Password: minioadmin
{{- else }}
Gradle Build Cache is disabled (enabled: false).
No resources have been deployed.
{{- end }}

{{- if .Values.reposilite.enabled }}

6. Reposilite (Maven/Gradle Dependency Proxy):

   Internal URL: http://{{ .Release.Name }}-reposilite:8080

   Port-forward to access the Reposilite dashboard:

   kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ .Release.Name }}-reposilite 8081:8080

   Then open http://localhost:8081
   Token: admin:changeme

   Maven repository URL (for Gradle):
   http://{{ .Release.Name }}-reposilite:8080/releases

7. Theia Pod Configuration:

   Set these environment variables in your Theia pods:

   GRADLE_CACHE_URL=http://{{ .Release.Name }}-cache:8080/cache/
   GRADLE_REPO_URL=http://{{ .Release.Name }}-reposilite:8080/releases
{{- end }}